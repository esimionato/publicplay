@(currentPage: Page[Post], votedPostKeys:Set[Long])
@import helper._ 
@import helper.twitterBootstrap._
@import helper.H._
@import views.html.security._

@restrictApproved() {
    <h4><a href="@routes.PostController.newForm">@Messages("Create_new_post")</a></h4>
}
@restrictNotApproved() {
	@Messages("Only_registered_and_approved_users")
    @roleHolderNotPresent(){
	<br>
	<h4>@Html(Messages("Login_to_register", partials.login()))</h4>
	}
}

<div class="hidden-phone">
    @if(currentPage.getTotalRowCount == 0) {
        
        <div class="well">
            <em>@Messages("Nothing_to_display")</em>
        </div>
        
    } else {
	
    <table class="posts table table-striped table-bordered">
        <thead>
            <tr>
                <th class="header" colspan="2">@Messages("Posts")</th>
            </tr>
        </thead>
        <tbody>
        @for(post <- currentPage.getList) {
            <tr>
                <td id="rating-col" class="center-horizontal">
                    <strong class="center-horizontal rating" data-key="rate-@post.getKey()" >@post.getRating()</strong>
                    <br/>
                   	@partials.rateButtons(post, votedPostKeys)
				</td>
                <td class="noborder-left">
                	<a href="@routes.PostController.show(post.getKey(), sanitizeURL(post.getTitle()))">@post.getTitle()</a>
               	</td>
				<td rowspan="2" class="noborder-left">
        			<a href="@routes.PostController.show(post.getKey(), sanitizeURL(post.getTitle()))">@partials.image(post.getImage())</a>
				</td>
			</tr>
            <tr>
                <td colspan="2" class="noborder-top">
                    <p class="noleft nl">@post.getContent()</p>
                </td>
            </tr>
        }
        </tbody>
    </table>
     @if(currentPage.getTotalRowCount > Constants.POSTS_PER_PAGE) {
    <div id="pagination" class="pagination">
        <ul>
            @if(currentPage.hasPrev) {
                <li class="prev">
                    <a href="@routes.PostController.list(currentPage.getPageIndex - 1)">&larr; @Messages("Previous")</a>
                </li>
            } else {
                <li class="prev disabled">
                    <a>&larr; @Messages("Previous")</a>
                </li>
            }
            <li class="current">
                <a>@paging(currentPage)</a>
            </li>
            @if(currentPage.hasNext) {
                <li class="next">
                    <a href="@routes.PostController.list(currentPage.getPageIndex + 1)">@Messages("Next") &rarr;</a>
                </li>
            } else {
                <li class="next disabled">
                    <a>@Messages("Next") &rarr;</a>
                </li>
            }
        </ul>
    </div>
     }
    }
</div>