@(page: Page[CRUDModel], modelName: String, keyFieldName: String, fieldNames: List[String])
@import helper._ 
@import helper.twitterBootstrap._
@import helper.H._

@main("admin") {
    
    <h3>@Messages("CRUD admin page")</h3>
    
    <h3>@page.getTotalRowCount @modelName (s)</h3>
    
    <h4><a href="@routes.AdminController.newForm(modelName)">@Messages("Create new")</a></h4>
    
    @if(page.getTotalRowCount == 0) {
        
        <div class="well">
            <em>@Messages("Nothing to display")</em>
        </div>
        
    } else {
    
    <table class="posts table table-striped table-bordered">
        <thead>
            <tr>
        @for(fieldName <- fieldNames) {
                <th class="header">@Messages(fieldName)</th>
        }
                <th class="header" colspan="3">@Messages("User.status")</th>
                <th class="header">@Messages("edit")</th>
                <th class="header">@Messages("delete")</th>
            </tr>
        </thead>
        <tbody>
        @for(model <- page.getList) {
            @defining(model.getModel().asInstanceOf[models.User]) {user =>
            <tr>
                <td><a href="@routes.AdminController.show(modelName, model.getKey())">@string(model.getKey())</a></td>
                <td><div class="profile">
                    <img alt="@user.getProfileImageURL()" src="@user.getProfileImageURL()"  />
                    <a href="https://www.facebook.com/profile.php?id=@user.getOriginalKey()">@user.getFirstName() @user.getLastName()</a>
                </div></td>
                <td>@prettify(user.getLastLogin())</td>
                <td>@user.getLoginCount()</td>
                <td>
                    @Messages("User.status." + user.getStatus())
                </td>
                <td>
                    @if(!user.isApproved()) { 
                    <a href="@routes.AdminController.userApprove(model.getKey())"><i class="icon-ok"></i></a>
                    }
                </td>
                <td>
                    @if(!user.isSuspended()) { 
                    <a href="@routes.AdminController.userSuspend(model.getKey())"><i class="icon-pause"></i></a>
                    }
                </td>
                <td>
                    <a href="@routes.AdminController.editForm(modelName, model.getKey())"><i class="icon-edit"></i></a>
                </td>
                <td>
                    <a href="@routes.AdminController.delete(modelName, model.getKey())"><i class="icon-trash"></i></a>
                </td>
            </tr>
            }
        }
        </tbody>
    </table>
    }
    
}