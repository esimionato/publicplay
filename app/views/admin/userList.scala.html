@(page: Page[CRUDModel], modelName: String, keyFieldName: String, fieldNames: List[String], user: models.User, status: models.User.Status)
@import helper._ 
@import helper.twitterBootstrap._
@import helper.H._

@main("admin", user) {
    
    <h3>@Messages("CRUD admin page")</h3>
    
    <h3>@page.getTotalRowCount @modelName (s)</h3>
    
    <h4><a href="@routes.AdminController.newForm(modelName)">@Messages("Create new")</a></h4>
    
    @if(page.getTotalRowCount == 0) {
        
        <div class="well">
            <em>@Messages("Nothing to display")</em>
        </div>
        
    } else {

    <!--     filter buttons     -->
    @Messages("Filter:")
    <div class="btn-group" data-toggle="buttons-radio">
	    <a class="btn btn-inverse @if(status != null && status.name.equals("NEW")) {active}" href='@routes.AdminController.userList("NEW", 0)'>@Messages("User.status.NEW")</a>
        <a class="btn btn-inverse @if(status != null && status.name.equals("APPROVED")) {active}" href='@routes.AdminController.userList("APPROVED", 0)'>@Messages("User.status.APPROVED")</a>
        <a class="btn btn-inverse @if(status != null && status.name.equals("SUSPENDED")) {active}" href='@routes.AdminController.userList("SUSPENDED", 0)'>@Messages("User.status.SUSPENDED")</a>
    </div>
    
    <table class="posts table table-striped table-bordered">
        <thead>
            <tr>
        @for(fieldName <- fieldNames) {
                <th class="header">@Messages(fieldName)</th>
        }
                <th class="header" colspan="3">@Messages("User.status")</th>
                <th class="header">@Messages("edit")</th>
                <th class="header">@Messages("delete")</th>
            </tr>
        </thead>
        <tbody>
        @for(model <- page.getList) {
            @defining(model.getModel().asInstanceOf[models.User]) {user =>
            <tr>
                <td><a href="@routes.AdminController.show(modelName, model.getKey())">@string(model.getKey())</a></td>
                <td><div class="profile">
                    <img alt="@user.getProfileImageURL()" src="@user.getProfileImageURL()"  />
                    <a href="https://www.facebook.com/profile.php?id=@user.getOriginalKey()">@user.getFirstName() @user.getLastName()</a>
                </div></td>
                <td>@prettify(user.getLastLogin())</td>
                <td>@user.getLoginCount()</td>
                <td>
                    @Messages("User.status." + user.getStatus())
                </td>
                <td>
                    @if(!user.isApproved()) { 
                    <a href="@routes.AdminController.userApprove(model.getKey())"><i class="icon-ok"></i></a>
                    }
                </td>
                <td>
                    @if(!user.isSuspended()) { 
                    <a href="@routes.AdminController.userSuspend(model.getKey())"><i class="icon-pause"></i></a>
                    }
                </td>
                <td>
                    <a href="@routes.AdminController.editForm(modelName, model.getKey())"><i class="icon-edit"></i></a>
                </td>
                <td>
                    <a href="@routes.AdminController.delete(modelName, model.getKey())"><i class="icon-trash"></i></a>
                </td>
            </tr>
            }
        }
        </tbody>
    </table>

    @partials.pagination(page, controllers.AdminController.PAGE_SIZE, 
        routes.AdminController.list(modelName, page.getPageIndex - 1),
        routes.AdminController.list(modelName, page.getPageIndex + 1))
    }
}